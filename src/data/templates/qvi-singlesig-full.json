{
  "id": "qvi-singlesig-full",
  "name": "SingleSig Full",
  "description": "Complete single-signature workflow with QVI, LE, ECR AUTH, OOR AUTH, ECR and OOR credential issuance",
  "author": "GLEIF",
  "version": "1.0.0",
  "createdDate": "2025-06-20T10:00:00Z",
  "tags": ["qvi", "singlesig", "full", "credential", "authorization", "verification"],
  "workflow": {
    "workflow": {
      "steps": {
        "gleif_client": {
          "id": "gleif_client",
          "type": "create_client",
          "agent_name": "gleif-agent-1",
          "description": "Creating client for gleif-agent-1"
        },
        "qvi_client": {
          "id": "qvi_client",
          "type": "create_client",
          "agent_name": "qvi-agent-1",
          "description": "Creating client for qvi-agent-1"
        },
        "le_client": {
          "id": "le_client",
          "type": "create_client",
          "agent_name": "le-agent-1",
          "description": "Creating client for le-agent-1"
        },
        "ecr_client": {
          "id": "ecr_client",
          "type": "create_client",
          "agent_name": "ecr-agent-1",
          "description": "Creating client for ecr-agent-1"
        },
        "gleif_aid": {
          "id": "gleif_aid",
          "type": "create_aid",
          "aid": "gleif-aid-1",
          "description": "Creating AID: gleif-aid-1"
        },
        "qvi_aid": {
          "id": "qvi_aid",
          "type": "create_aid",
          "aid": "qvi-aid-1",
          "description": "Creating AID: qvi-aid-1"
        },
        "le_aid": {
          "id": "le_aid",
          "type": "create_aid",
          "aid": "le-aid-1",
          "description": "Creating AID: le-aid-1"
        },
        "ecr_aid": {
          "id": "ecr_aid",
          "type": "create_aid",
          "aid": "ecr-aid-1",
          "description": "Creating AID: ecr-aid-1"
        },
        "gleif_registry": {
          "id": "gleif_registry",
          "type": "create_registry",
          "aid": "gleif-aid-1",
          "description": "Creating registry for gleif-aid-1"
        },
        "qvi_registry": {
          "id": "qvi_registry",
          "type": "create_registry",
          "aid": "qvi-aid-1",
          "description": "Creating registry for qvi-aid-1"
        },
        "le_registry": {
          "id": "le_registry",
          "type": "create_registry",
          "aid": "le-aid-1",
          "description": "Creating registry for le-aid-1"
        },
        "ecr_registry": {
          "id": "ecr_registry",
          "type": "create_registry",
          "aid": "ecr-aid-1",
          "description": "Creating registry for ecr-aid-1"
        },
        "qvi_cred": {
          "id": "qvi_cred",
          "type": "issue_credential",
          "attributes": {
            "LEI": "254900OPPU84GM83MG36"
          },
          "issuer_aid": "gleif-aid-1",
          "issuee_aid": "qvi-aid-1",
          "description": "GLEIF issues QVI vLEI credential",
          "credential": "gleif_to_qvi_vlei_cred"
        },
        "le_cred": {
          "id": "le_cred",
          "type": "issue_credential",
          "attributes": {
            "LEI": "875500ELOZEL05BVXV37"
          },
          "issuer_aid": "qvi-aid-1",
          "issuee_aid": "le-aid-1",
          "description": "QVI issues LE vLEI credential",
          "credential": "qvi_to_le_vlei_cred",
          "credential_source": "qvi_cred"
        },
        "ecr_cred": {
          "id": "ecr_cred",
          "type": "issue_credential",
          "attributes": {
            "personLegalName": "John Doe",
            "LEI": "875500ELOZEL05BVXV37"
          },
          "issuer_aid": "le-aid-1",
          "issuee_aid": "ecr-aid-1",
          "description": "LE issues ECR vLEI credential",
          "credential": "le_to_ecr_vlei_cred",
          "credential_source": "le_cred"
        },
        "add_root_of_trust": {
          "id": "add_root_of_trust",
          "type": "add_root_of_trust",
          "rot_aid": "gleif-aid-1",
          "description": "Adding Root of Trust"
        },
        "credential_verification_valid_verified": {
          "id": "credential_verification_valid_verified",
          "type": "vlei_verification",
          "description": "Running Vlei Verification",
          "actions": {
            "present_credential": {
              "credential": "ecr_cred",
              "type": "credential_presentation",
              "expected_status": "cred_crypt_valid"
            },
            "authorize_credential": {
              "aid": "ecr-aid-1",
              "type": "credential_authorization",
              "expected_status": "cred_verified"
            }
          }
        },
        "ecr_auth_cred": {
          "id": "ecr_auth_cred",
          "type": "issue_credential",
          "attributes": {
            "personLegalName": "John Doe",
            "LEI": "875500ELOZEL05BVXV37",
            "AID": "ecr-aid-1"
          },
          "issuer_aid": "le-aid-1",
          "issuee_aid": "qvi-aid-1",
          "description": "LE issues ECR Auth credential to QVI",
          "credential": "le_to_qvi_ecr_auth_cred",
          "credential_source": "le_cred"
        },
        "ecr_cred_from_ecr_auth": {
          "id": "ecr_cred_from_ecr_auth",
          "type": "issue_credential",
          "attributes": {
            "personLegalName": "John Doe",
            "LEI": "875500ELOZEL05BVXV37"
          },
          "issuer_aid": "qvi-aid-1",
          "issuee_aid": "ecr-aid-1",
          "description": "QVI issues ECR credential from ECR Auth",
          "credential": "qvi_to_ecr_vlei_cred_from_le_to_qvi_ecr_auth_cred",
          "credential_source": "ecr_auth_cred"
        },
        "credential_verification_valid_verified_2": {
          "id": "credential_verification_valid_verified_2",
          "type": "vlei_verification",
          "description": "Running Vlei Verification",
          "actions": {
            "present_credential": {
              "credential": "ecr_cred_from_ecr_auth",
              "type": "credential_presentation",
              "expected_status": "cred_crypt_valid"
            },
            "authorize_credential": {
              "aid": "ecr-aid-1",
              "type": "credential_authorization",
              "expected_status": "cred_verified"
            }
          }
        },
        "oor_auth_cred": {
          "id": "oor_auth_cred",
          "type": "issue_credential",
          "attributes": {
            "personLegalName": "John Doe",
            "LEI": "875500ELOZEL05BVXV37",
            "AID": "ecr-aid-1"
          },
          "issuer_aid": "le-aid-1",
          "issuee_aid": "qvi-aid-1",
          "description": "LE issues OOR Auth credential to QVI",
          "credential": "le_to_qvi_oor_auth_cred",
          "credential_source": "le_cred"
        },
        "ecr_cred_from_oor_auth": {
          "id": "ecr_cred_from_oor_auth",
          "type": "issue_credential",
          "attributes": {
            "personLegalName": "John Doe",
            "LEI": "875500ELOZEL05BVXV37"
          },
          "issuer_aid": "qvi-aid-1",
          "issuee_aid": "ecr-aid-1",
          "description": "QVI issues OOR credential from OOR Auth",
          "credential": "qvi_to_ecr_vlei_oor_cred_from_le_to_qvi_oor_auth_cred",
          "credential_source": "oor_auth_cred"
        },
        "credential_verification_oor_auth_valid_not_verified": {
          "id": "credential_verification_oor_auth_valid_not_verified",
          "type": "vlei_verification",
          "description": "Running Vlei Verification",
          "actions": {
            "present_credential": {
              "credential": "ecr_cred_from_oor_auth",
              "type": "credential_presentation",
              "expected_status": "cred_crypt_valid"
            },
            "authorize_credential": {
              "aid": "ecr-aid-1",
              "type": "credential_authorization",
              "expected_status": "cred_invalid_schema"
            }
          }
        }
      }
    }
  },
  "config": {
    "secrets": {
      "gleif1": "D_PbQb01zuzQgK-kDWjq5",
      "qvi1": "BTaqgh1eeOjXO5iQJp6m5",
      "le1": "Akv4TFoiYeHNqzj3N8gE5",
      "le2": "Lf8nafHfan8fnafnnnfa5",
      "ecr1": "nf98hUHUy8Vt5tvdyaYV5",
      "ecr2": "CbII3tno87wn3uGBP12q5",
      "ecr3": "defh7b7g7gfaBuf83bf05"
    },
    "credentials": {
      "gleif_to_qvi_vlei_cred": {
        "type": "direct",
        "schema": "QVI_SCHEMA_SAID",
        "privacy": false,
        "attributes": {}
      },
      "qvi_to_le_vlei_cred": {
        "credSource": {
          "type": "qvi"
        },
        "type": "direct",
        "schema": "LE_SCHEMA_SAID",
        "rules": "LE_RULES",
        "privacy": false,
        "attributes": {}
      },
      "le_to_ecr_vlei_cred": {
        "credSource": {
          "type": "le"
        },
        "type": "direct",
        "schema": "ECR_SCHEMA_SAID",
        "rules": "ECR_RULES",
        "privacy": true,
        "attributes": {
          "engagementContextRole": "EBA Data Submitter"
        }
      },
      "le_to_other_ecr_vlei_cred": {
        "credSource": {
          "type": "le"
        },
        "type": "direct",
        "schema": "ECR_SCHEMA_SAID",
        "rules": "ECR_RULES",
        "privacy": true,
        "attributes": {
          "engagementContextRole": "Other ECR"
        }
      },
      "le_to_qvi_ecr_auth_cred": {
        "credSource": {
          "type": "le"
        },
        "type": "direct",
        "schema": "ECR_AUTH_SCHEMA_SAID",
        "rules": "ECR_AUTH_RULES",
        "privacy": false,
        "attributes": {
          "engagementContextRole": "EBA Data Submitter"
        }
      },
      "qvi_to_ecr_vlei_cred_from_le_to_qvi_ecr_auth_cred": {
        "credSource": {
          "type": "auth",
          "o": "I2I"
        },
        "type": "direct",
        "schema": "ECR_SCHEMA_SAID",
        "rules": "ECR_RULES",
        "privacy": true,
        "attributes": {
          "engagementContextRole": "EBA Data Submitter"
        }
      },
      "le_to_qvi_oor_auth_cred": {
        "credSource": {
          "type": "le"
        },
        "type": "direct",
        "schema": "OOR_AUTH_SCHEMA_SAID",
        "rules": "OOR_AUTH_RULES",
        "privacy": false,
        "attributes": {
          "officialRole": "HR Manager"
        }
      },
      "qvi_to_ecr_vlei_oor_cred_from_le_to_qvi_oor_auth_cred": {
        "credSource": {
          "type": "auth",
          "o": "I2I"
        },
        "type": "direct",
        "schema": "OOR_SCHEMA_SAID",
        "rules": "OOR_RULES",
        "privacy": false,
        "attributes": {
          "officialRole": "HR Manager"
        }
      }
    },
    "agents": {
      "gleif-agent-1": {
        "secret": "gleif1"
      },
      "qvi-agent-1": {
        "secret": "qvi1"
      },
      "le-agent-1": {
        "secret": "le1"
      },
      "ecr-agent-1": {
        "secret": "ecr1"
      }
    },
    "identifiers": {
      "gleif-aid-1": {
        "agent": "gleif-agent-1",
        "name": "gleif-aid-1"
      },
      "qvi-aid-1": {
        "delegator": "gleif-aid-1",
        "agent": "qvi-agent-1",
        "name": "qvi-aid-1"
      },
      "le-aid-1": {
        "agent": "le-agent-1",
        "name": "le-aid-1"
      },
      "ecr-aid-1": {
        "agent": "ecr-agent-1",
        "name": "ecr-aid-1"
      }
    },
    "users": [
      {
        "type": "GLEIF",
        "alias": "gleif-user-1",
        "identifiers": ["gleif-aid-1"]
      },
      {
        "type": "QVI",
        "alias": "qvi-user-1",
        "identifiers": ["qvi-aid-1"]
      },
      {
        "type": "LE",
        "alias": "le-user-1",
        "identifiers": ["le-aid-1"]
      },
      {
        "type": "ECR",
        "alias": "ecr-user-1",
        "identifiers": ["ecr-aid-1"]
      }
    ]
  }
} 